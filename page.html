<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Scraps Item Calculator</title>
  <link rel="icon" href="favicon.svg" type="image/svg+xml">
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div id="gate" class="gate">
    <div class="gateCard">
      <div class="stamp">heads up</div>
      <h1 class="gateTitle"> quick warning</h1>
      <p class="gateText">
        this calculator may be inaccurate sometimes.<br/>
        100% <b>don't</b> gamble irresponsibly<br/>
        use your brain! be chill :D
      </p>
      <div class="gateBtns">
        <button id="gateYes" class="btn primary" type="button">yuh uh</button>
        <button id="gateNo" class="btn" type="button">nuh uh</button>
      </div>
      <p class="tiny">decision is saved via cache(so choose wisely)</p>

      <div class="cornerNote">
        hey this is 100% better than that other scraps calculator....(no shade tho fr)<br />
        ( if ya want to check it out
        <a href="https://xordas.me/scraps-calculator/" target="_blank">
            https://xordas.me/scraps-calculator/
        </a> )
      </div> 
    </div>
  </div>

  <div id="nuh" class="nuh">
    <div class="nuhInner">
      <img class="nuhGif" src="loll.gif" alt="loll gif">
      <div class="nuhText">welp dont gamble then</div>

      <div class="nuhLinks">
        <a class="repoLink" href="https://github.com/CKacha/scrapcalc" target="_blank">
            view da repo instead ->
        </a>

        <div class="resetHint">
            pressed the wrong thing?<br/>
            open console(aka F12) and run:<br/>
            <code>localStorage.removeItem("scraps_gate_decision")</code><br/>
            <code>location.reload()</code>
        </div>
      </div>
    </div>
  </div>

  <main id="app" class="wrap">
    <header class="header">
      <div class="badge">SCRAPS</div>

      <div class="postits">
        <div class="postit a">made by @Iamalive</div>
        <div class="postit b">(this is totally not gambling)</div>
      </div>

      <h1>Cheapest way calc:</h1>
      <p class="sub">
        Input item roll cost + base chance, refinery upgrade cost + boost.
        Finds the cheapest strategy (<b>minimum expected scraps</b>).
        If ya won click the button indicating so, then you'll get a more accurate chance for that scenario
      </p>
    </header>

    <div class="calcLayout">
      <section class="card tape">
        <div class="cardHead">
          <h2>Inputs</h2>
          <button id="alreadyWonBtn" class="btn toggle" type="button" aria-pressed="false">
            Already won? <span id="alreadyWonState" class="pill">NO</span>
          </button>
        </div>

        <div class="grid">
          <label class="field">
            <span>Item roll cost (scraps)</span>
            <input id="rollCost" type="number" min="0" step="1" placeholder="e.g. 250" />
          </label>

          <label class="field">
            <span>Base chance per roll (%)</span>
            <input id="baseChance" type="number" min="0" max="100" step="1" placeholder="e.g. 40" />
          </label>

          <label class="field">
            <span>Upgrade cost (scraps)</span>
            <input id="upgradeCost" type="number" min="0" step="1" placeholder="e.g. 51" />
          </label>

          <label class="field">
            <span>Chance increase per refinery upgrade (%)</span>
            <input id="upgradeInc" type="number" min="0" step="1" placeholder="e.g. 5" />
          </label>
        </div>

        <div class="row">
          <button id="calcBtn" class="btn primary" type="button">Calculate</button>
          <button id="resetBtn" class="btn" type="button">Reset</button>
        </div>

        <p class="hint">
          Tier rates are <b>scraps/hour</b>: T1 = 12, T2 = 16, T3 = 20, T4 = 25.
          Expected rolls are shown as decimals (not rounded bc i dont want to be in boolean pain).
        </p>
      </section>

      <section class="card chartCard">
        <h2>Graph</h2>
        <div id="chartEmpty" class="chartEmpty">hit <b>Calculate!</b> to generate graph</div>
        <div id="chartWrap" class="chartWrap hidden">
          <canvas id="strategyChart"></canvas>
        </div>
      </section>
    </div>

    <section class="card">
      <h2>Result</h2>
      <div id="result" class="result">
        put numbers in → hit <b>Calculate!</b>.
      </div>
    </section>

    <section class="card warmCard">
      <div class="warmHead">
        <h2>Warmup</h2>
        <button id="warmupBtn" class="btn wide" type="button">wanna try some warmup gambling?</button>
      </div>

      <div id="warmupArea" class="warmupArea">
        <div class="warmupTop">
          <div class="scrapTag">warmup zone</div>
          <div class="warmupNote">win if final number ≤ your chance</div>
        </div>

        <div class="grid">
          <label class="field">
            <span>Chance to obtain (%)</span>
            <input id="warmChance" type="number" min="0" max="100" step="1" placeholder="e.g. 25" />
          </label>

          <label class="field">
            <span>Scraps used per roll</span>
            <input id="warmCost" type="number" min="0" step="1" placeholder="e.g. 250" />
          </label>
        </div>

        <div class="row">
          <button id="warmRollBtn" class="btn primary" type="button">try gambeling</button>
          <button id="warmResetBtn" class="btn" type="button">reset warmup</button>
        </div>

        <div class="warmStats">
          <div class="stat"><span class="k">rolls</span><span id="warmRolls" class="v">0</span></div>
          <div class="stat"><span class="k">scraps</span><span id="warmScraps" class="v">0</span></div>
          <div class="stat"><span class="k">last</span><span id="warmLast" class="v">—</span></div>
        </div>

        <div class="case">
          <div class="caseWindow">
            <div class="casePointer"></div>
            <div id="caseStrip" class="caseStrip"></div>
          </div>
        </div>
      </div>
    </section>

    <footer class="footer">
      <p>tried my best to replicate the scraps ui, uhhh does it look similar?</p>
    </footer>
  </main>

  <div id="modal" class="modal hidden" role="dialog" aria-modal="true">
    <div class="modalCard">
      <div id="modalTitle" class="modalTitle">hey</div>
      <div id="modalBody" class="modalBody">…</div>
      <div id="modalBtns" class="modalBtns"></div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="script.js"></script>
</body>
</html>